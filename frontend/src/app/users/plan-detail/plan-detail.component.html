<div *ngIf="plan">
    <form class="siimple-card siimple-form" #planForm="ngForm" (submit)="save()">
        <div class="siimple-form-title">Plan detail</div>
        <div class="siimple-grid">
            <div class="siimple-grid-row">
                <div class="siimple-grid-col siimple-grid-col--3 siimple-grid-col-sm--5 siimple--py-0">
                    <div class="siimple-form-field">
                        <div class="siimple-form-field-label">Short name</div>
                        <input type="text" class="siimple-input siimple-input--fluid" autofocus required
                            name="short_name" id="short_name" [(ngModel)]="plan.short_name" #short_name="ngModel">

                        <div *ngIf="short_name.invalid && (short_name.dirty || triedToSave)">
                            <div class="siimple-field-helper siimple--color-error">This field can't be empty</div>
                        </div>
                    </div>
                </div>
                <div class="siimple-grid-col siimple-grid-col--9 siimple-grid-col-sm--7 siimple--py-0">
                    <div class="siimple-form-field">
                        <div class="siimple-form-field-label">Name</div>
                        <input type="text" class="siimple-input siimple-input--fluid" required name="name" id="name"
                            [(ngModel)]="plan.name" #name="ngModel">

                        <div *ngIf="name.invalid && (name.dirty || triedToSave)">
                            <div class="siimple-field-helper siimple--color-error">This field can't be empty</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="siimple-grid-row">
                <div class="siimple-grid-col siimple-grid-col--12 siimple--py-0">
                    <div class="siimple-form-field">
                        <div class="siimple-form-field-label">Description</div>
                        <textarea type="text" class="siimple-textarea siimple-textarea--fluid" rows="3" required
                            name="description" id="description" [(ngModel)]="plan.description" #description="ngModel">
                        </textarea>

                        <div *ngIf="description.invalid && (description.dirty || triedToSave)">
                            <div class="siimple-field-helper siimple--color-error">This field can't be empty</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="sessions">
            <div class="siimple-tabs">
                <div class="siimple-tabs-item" *ngFor="let session of plan.sessions"
                    [class.siimple-tabs-item--selected]="session==selectedSession" (click)="selectSession(session)">
                    {{session.name}}
                    <fa-icon [icon]="faTimesCircle" class="siimple--ml-1" (click)="removeSession(session)"></fa-icon>
                </div>
                <div class="siimple-tabs-item" (click)="addSession()">
                    <fa-icon [icon]="faCalendarPlus" class=""></fa-icon>
                    <span class="siimple--ml-1 siimple--display-sm-none">Add Session</span>
                </div>
            </div>
            <div>
                <div class="tab-content" *ngFor="let session of plan.sessions"
                    [class.tab-content-selected]="session==selectedSession">
                    <app-plan-session [planSession]=session [exercises]=exercises [triedToSave]=triedToSave>
                    </app-plan-session>
                </div>
            </div>
        </div>
        <button class="siimple-btn siimple-btn--success" type="submit">Save</button>
    </form>
</div>