<app-workout-set-edit [visible]=editing [sets]=sets [workoutActivity]=workoutActivity [triedToSave]=triedToSave 
(closed)="onWorkingSetEditClosed()" (cloneOrders)="onCloneOrder($event)">
</app-workout-set-edit>

<app-workout-set-repetitions-edit [visible]=editingRepetitions [workoutActivity]=workoutActivity [triedToSave]=triedToSave
(closed)="onWorkingSetEditRepetitionsClosed()">
</app-workout-set-repetitions-edit>

<div (click)="toggleDone()" 
style="padding: 10px;"
[class.siimple--text-bold]="workoutActivity.in_progress">
    <fa-icon [icon]="faEdit" (click)="toggleEdit($event)" class="siimple--mr-1"></fa-icon>
    <span *ngIf="workoutActivity.exercise">
        <span class="phones-only">
            {{workoutActivity.exercise.short_name}}
        </span>
        <span class="siimple--display-sm-none">
            {{workoutActivity.exercise.name}}
        </span>
    </span>

    <span *ngIf="workoutActivity.exercise && workoutActivity.exercise.exercise_type == 'c'">
        <span *ngIf="workoutActivity.speed ||
            workoutActivity.expected_speed || 
            (workoutActivity.speed_type && 
            workoutActivity.speed_type == speedType.AFAP)">
            <span
                *ngIf="workoutActivity.speed || workoutActivity.expected_speed">
                at
            </span>

            <span *ngIf="workoutActivity.speed">
                <span *ngIf="workoutActivity.speed % 1 == 0">
                    {{workoutActivity.speed | number: '1.0-0'}}
                </span>
                <span *ngIf="workoutActivity.speed % 1 != 0">
                    {{workoutActivity.speed}}
                </span>
            </span>

            <span *ngIf="!workoutActivity.speed">
                <span *ngIf="workoutActivity.speed_type==speedType.Standard ||
                    workoutActivity.speed_type==speedType.Range ||
                    workoutActivity.speed_type==speedType.Parameter">
                    <span *ngIf="workoutActivity.expected_speed % 1 == 0">
                        {{workoutActivity.expected_speed | number: '1.0-0'}}
                    </span>
                    <span *ngIf="workoutActivity.expected_speed % 1 != 0">
                        {{workoutActivity.expected_speed}}
                    </span>
                </span>
                <span *ngIf="workoutActivity.speed_type==speedType.Range">
                    -
                    <span *ngIf="workoutActivity.expected_speed_up_to % 1 == 0">
                        {{workoutActivity.expected_speed_up_to | number: '1.0-0'}}
                    </span>
                    <span *ngIf="workoutActivity.expected_speed_up_to % 1 != 0">
                        {{workoutActivity.expected_speed_up_to}}
                    </span>
                </span>
                <span *ngIf="workoutActivity.speed_type==speedType.AFAP">
                    AFAP
                </span>
            </span>

            <span *ngIf="workoutActivity.speed || workoutActivity.expected_speed">
                {{getUnitCode(workoutActivity.speed_unit)}}
            </span>
        </span>

        <span *ngIf="workoutActivity.distance ||
            workoutActivity.expected_distance">
            <span>
                for
            </span>

            <span *ngIf="workoutActivity.distance">
                <span *ngIf="workoutActivity.distance % 1 == 0">
                    {{workoutActivity.distance | number: '1.0-0'}}
                </span>
                <span *ngIf="workoutActivity.distance % 1 != 0">
                    {{workoutActivity.distance}}
                </span>
            </span>

            <span *ngIf="!workoutActivity.distance">
                <span *ngIf="workoutActivity.distance_type==distanceType.Standard ||
                    workoutActivity.distance_type==distanceType.Range ||
                    workoutActivity.distance_type==distanceType.Parameter">
                    <span *ngIf="workoutActivity.expected_distance % 1 == 0">
                        {{workoutActivity.expected_distance | number: '1.0-0'}}
                    </span>
                    <span *ngIf="workoutActivity.expected_distance % 1 != 0">
                        {{workoutActivity.expected_distance}}
                    </span>
                </span>
                <span *ngIf="workoutActivity.distance_type==distanceType.Range">
                    -
                    <span *ngIf="workoutActivity.expected_distance_up_to % 1 == 0">
                        {{workoutActivity.expected_distance_up_to | number: '1.0-0'}}
                    </span>
                    <span *ngIf="workoutActivity.expected_distance_up_to % 1 != 0">
                        {{workoutActivity.expected_distance_up_to}}
                    </span>
                </span>
            </span>

            <span *ngIf="workoutActivity.distance || workoutActivity.expected_distance">
                {{getUnitCode(workoutActivity.distance_unit)}}
            </span>
        </span>

        <span *ngIf="workoutActivity.time || workoutActivity.expected_time">
            <span *ngIf="workoutActivity.distance ||
                (workoutActivity.distance_type && 
                workoutActivity.distance_type != distanceType.None); else alternativeTimeIntroduction">
                <span>
                    in
                </span>
            </span>

            <ng-template #alternativeTimeIntroduction>
                for
            </ng-template>

            <span *ngIf="workoutActivity.time">
                <span *ngIf="workoutActivity.time % 1 == 0">
                    {{workoutActivity.time | number: '1.0-0'}}
                </span>
                <span *ngIf="workoutActivity.time % 1 != 0">
                    {{workoutActivity.time}}
                </span>
            </span>

            <span *ngIf="!workoutActivity.time">
                <span *ngIf="workoutActivity.time_type==timeType.Standard ||
                    workoutActivity.time_type==timeType.Range ||
                    workoutActivity.time_type==timeType.Parameter">
                    <span *ngIf="workoutActivity.expected_time % 1 == 0">
                        {{workoutActivity.expected_time | number: '1.0-0'}}
                    </span>
                    <span *ngIf="workoutActivity.expected_time % 1 != 0">
                        {{workoutActivity.expected_time}}
                    </span>
                </span>
                <span *ngIf="workoutActivity.time_type==timeType.Range">
                    -
                    <span *ngIf="workoutActivity.expected_time_up_to % 1 == 0">
                        {{workoutActivity.expected_time_up_to | number: '1.0-0'}}
                    </span>
                    <span *ngIf="workoutActivity.expected_time_up_to % 1 != 0">
                        {{workoutActivity.expected_time_up_to}}
                    </span>
                </span>
            </span>

            <span *ngIf="workoutActivity.time || workoutActivity.expected_time">
                {{getUnitCode(workoutActivity.time_unit)}}
            </span>
        </span>

        <span *ngIf="workoutActivity.vo2max || workoutActivity.expected_vo2max">
            <span>
                with
            </span>

            <span *ngIf="workoutActivity.vo2max">
                <span>{{workoutActivity.vo2max | number: '1.0-0'}}%</span>
            </span>

            <span *ngIf="!workoutActivity.vo2max">
                <span *ngIf="workoutActivity.vo2max_type==vo2MaxType.Standard ||
                    workoutActivity.vo2max_type == vo2MaxType.Range">
                    <span *ngIf="workoutActivity.expected_vo2max % 1 == 0">
                        {{workoutActivity.expected_vo2max | number: '1.0-0'}}%
                    </span>
                    <span *ngIf="workoutActivity.expected_vo2max % 1 != 0">
                        {{workoutActivity.expected_vo2max}}%
                    </span>
                </span>
                <span *ngIf="workoutActivity.vo2max_type==vo2MaxType.Range">
                    -
                    <span *ngIf="workoutActivity.expected_vo2max_up_to % 1 == 0">
                        {{workoutActivity.expected_vo2max_up_to | number: '1.0-0'}}%
                    </span>
                    <span *ngIf="workoutActivity.expected_vo2max_up_to % 1 != 0">
                        {{workoutActivity.expected_vo2max_up_to}}%
                    </span>
                </span>
            </span>

            <span>
                VO2 max
            </span>
        </span>
    </span>

    <span *ngIf="workoutActivity.exercise && workoutActivity.exercise.exercise_type == 's'">
        <span>
            x
        </span>
        <span *ngIf="workoutActivity.weight">
            <span *ngIf="workoutActivity.weight % 1 == 0">
                {{workoutActivity.weight | number: '1.0-0'}}
            </span>
            <span *ngIf="workoutActivity.weight % 1 != 0">
                {{workoutActivity.weight}}
            </span>
            <span>
                {{getUnitCode(workoutActivity.weight_unit)}}
            </span>
        </span>
        <span *ngIf="!workoutActivity.weight">
            (bar)
        </span>
        <span *ngIf="workoutActivity.repetition_type!=repetitionType.None">
            x
        </span>
        <span>
        <!-- <span (click)="toggleEditRepetitions($event)"> -->
            <span *ngIf="workoutActivity.number_of_repetitions">
                <span>{{workoutActivity.number_of_repetitions}}</span>
            </span>
            <span *ngIf="!workoutActivity.number_of_repetitions">
                <span *ngIf="workoutActivity.repetition_type==repetitionType.Standard">
                    {{workoutActivity.expected_number_of_repetitions}}
                </span>
                <span *ngIf="workoutActivity.repetition_type==repetitionType.Range">
                    {{workoutActivity.expected_number_of_repetitions}} -
                    {{workoutActivity.expected_number_of_repetitions_up_to}}
                </span>
                <span *ngIf="workoutActivity.repetition_type==repetitionType.ToFailure">
                    F
                </span>
                <span *ngIf="workoutActivity.repetition_type==repetitionType.AMRAP">
                    AMRAP
                </span>
            </span>
        </span>
    </span>

    <fa-icon *ngIf="workoutActivity.done" [icon]="faCheck" class="siimple--float-right"></fa-icon>
</div>
