<div class="siimple-card" *ngIf="workout">
    <div class="siimple-card-header">
        <a class="siimple-link workout-card-header-link" 
        [routerLink]="['/users', workout.user.username, 'workout', workout.id]">
            {{workout.name}}
        </a>

        <div *ngIf="showSaveDeleteButtons && !deleting && isLoggedIn()" class="siimple--ml-2 siimple-modal-header-close" (click)="toggleDeleteModal()">
        </div>

        <fa-icon class="loading-delete-icon siimple--ml-2" [icon]="faCircleNotch" [spin]=true *ngIf="deleting"></fa-icon>

        <span class="siimple--float-right siimple-small" *ngIf="dateString">
            {{dateString}}
        </span>
    </div>
    <div class="siimple-card-body">
        <table class="siimple-table siimple-table--striped siimple-table--border">
            <thead class="siimple-table-header">
                <tr class="siimple-table-row">
                    <th class="siimple-table-cell">Exercise</th>
                    <th class="siimple-table-cell" align="center">Weight</th>
                    <th class="siimple-table-cell" align="center">Sets</th>
                    <th class="siimple-table-cell" align="center">Reps</th>
                </tr>
            </thead>
            <tbody class="siimple-table-body">
                <tr class="siimple-table-row link-row"  *ngFor="let workoutActivity of workoutActivities">
                    <td class="siimple-table-cell">
                        {{workoutActivity.exercise.name}}
                    </td>
                    <td class="siimple-table-cell" align="center">
                        <span *ngIf="workoutActivity.weight">
                            <span *ngIf="workoutActivity.weight % 1 == 0">
                                {{workoutActivity.weight | number: '1.0-0'}}
                            </span>
                            <span *ngIf="workoutActivity.weight % 1 != 0">
                                {{workoutActivity.weight}}
                            </span>
                            <span>
                                {{getUnitCode(workoutActivity.weight_unit)}}
                            </span>
                        </span>
                        <span *ngIf="!workoutActivity.weight">
                            <span>
                                (bar)
                            </span>
                        </span>
                    </td>
                    <td class="siimple-table-cell" align="center">
                        <span *ngIf="workoutActivity.number_of_sets">
                            <span>{{workoutActivity.number_of_sets}}</span>
                        </span>
                    </td>
                    <td class="siimple-table-cell" align="center">
                        <span *ngIf="workoutActivity.number_of_repetitions">
                            <span>{{workoutActivity.number_of_repetitions}}</span>
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="siimple-card-footer">
        <app-card-social-interaction content_type_model='workout' [id]=workout.id></app-card-social-interaction>
    </div>
</div>

<app-delete-modal 
    [(visible)]="deleteModalVisible"
    title='Delete workout?'
    body='This will delete your workout and associated data. Are you sure you want to proceed?'
    (deleted)="delete()"
    (canceled)="toggleDeleteModal()"
    >
</app-delete-modal>