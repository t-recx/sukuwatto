<div class="siimple-modal siimple-modal--medium" id="modal" *ngIf="deleteModalVisible">
    <div class="siimple-modal-content">
        <div class="siimple-modal-header">
            <div class="siimple-modal-header-title">Delete Post?</div>
            <div class="siimple-modal-header-close" id="modal-close" (click)="hideDeleteModal()"></div>
        </div>
        <div class="siimple-modal-body">
            <p class="siimple-p">
                This will delete your post and associated data! Are you sure you want to proceed?
            </p>
        </div>
        <div class="siimple-modal-footer">
            <button class="siimple-btn siimple-btn--success" type="button" (click)="delete()">
                Yes
            </button>
            <button class="siimple-btn siimple-btn--error siimple--ml-2" type="button" (click)="hideDeleteModal()">
                Cancel
            </button>
        </div>
    </div>
</div>

<div class="siimple-card" *ngIf="post">
    <div class="siimple-card-header " *ngIf="showHeader">
        <div *ngIf="authenticatedUserIsOwner">
            <div class="modal-header-corner siimple--mr-2" (click)="toggleEditing()">
                <fa-icon [icon]="faEdit" class=""></fa-icon>
            </div>
            <div class="modal-header-corner" (click)="showDeleteModal()">
                <fa-icon [icon]="faTrash" class=""></fa-icon>
            </div>
        </div>

        <div class="post-header">
            <span class="user-profile">
                <app-user-tag [username]="post.user.username" 
                [profile_filename]="post.user.profile_filename" class="user-profile">
                </app-user-tag>
                <span *ngIf="post.title">
                    {{post.title}}
                </span>
            </span>

            <small class="siimple-small time">{{getTime(post.date)}}</small>

            <small class="siimple-small edited-time" *ngIf="post.edited_date">
                (edited: {{getTime(post.edited_date)}})
            </small>
        </div>
    </div>
    <div class="siimple-card-body">
        <div *ngIf="editing" class="siimple-form post-form">
            <div class="siimple-form-field">
              <textarea type="text" class="siimple-textarea siimple-textarea--fluid" rows="3" name="newPost" id="newPost"
                  required
                  [(ngModel)]="post.text" #newPost="ngModel" placeholder="What's on your mind?">
              </textarea>
            </div>

            <div class="siimple--clearfix">
                <button class="siimple-btn siimple-btn--primary siimple--float-right" (click)="update()">
                    <!--
                        <fa-icon [icon]="faComment" class="siimple--mr-1"></fa-icon>
                    -->
                    Update
                </button>
            </div>
        </div>
        <div *ngIf="!editing">
            {{post.text}}
        </div>
    </div>
    <div class="siimple-card-footer post-footer">
        <app-card-social-interaction content_type_model='post' [id]=id [commentsSectionOpen]=commentsSectionOpen></app-card-social-interaction>
    </div>
</div>
